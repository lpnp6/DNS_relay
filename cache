#include "Header.h"
#pragma warning(disable:4996)


map<char*,cacheInfo> cache;
bool needAdd = 0;  //当前访问的目标是否需要添加到cache
const char* handlecache(char* domainName) {
	const char* getip = findIP(domainName);
	if (getip == NULL)//先在本地找，没找到去cache找
	{
		auto it = cache.find(domainName);
		if (it != cache.end())// 找到了
		{
			printf("Using cached result for %s\n", domainName);
			return it->second.ipAddress;
		}
		else {
			// 没找到
			needAdd = 1;
			printf("Querying upstream DNS server for %s\n", domainName);
			return NULL;
		}
	}
	return getip;
}
